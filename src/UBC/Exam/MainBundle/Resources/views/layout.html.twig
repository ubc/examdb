<!DOCTYPE html>
<!--[if IEMobile 7]><html class="iem7 oldie" lang="en"><![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="ie7 oldie" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="ie8 oldie" lang="en"><![endif]-->
<!--[if (IE 9)&!(IEMobile)]><html class="ie9" lang="en"><![endif]-->
<!--[[if (gt IE 9)|(gt IEMobile 7)]><!--><html lang="en"><!--<![endif]-->
<!--
 * UBC CLF (Common Look and Feel) v7.0.4
 * Copyright 2012 The University of British Columbia
 * UBC Communications and Marketing
 * http://brand.ubc.ca/clf
 */
-->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>{% block title 'Exam Prep Database' %}</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="The UBC exam preparation database contains exams and other assessment-related material used in current and past UBC courses.">
  <meta name="author" content="">
  <!-- Stylesheets -->
  <link href="//cdn.ubc.ca/clf/7.0.4/css/ubc-clf-full.min.css" rel="stylesheet">
  {% stylesheets 'bundles/ubcexammain/css/*' filter='cssrewrite' %}
  <link rel="stylesheet" href="{{ asset_url }}" />
  {% endstylesheets %}
  <!--link href="css/unit.css" rel="stylesheet"-->
  <!--[if lte IE 7]>
  <link href="//cdn.ubc.ca/clf/7.0.4/css/font-awesome-ie7.css" rel="stylesheet">
  <![endif]-->
  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
  <link rel="shortcut icon" href="//cdn.ubc.ca/clf/7.0.4/img/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="//cdn.ubc.ca/clf/7.0.4/img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="//cdn.ubc.ca/clf/7.0.4/img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="//cdn.ubc.ca/clf/7.0.4/img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="//cdn.ubc.ca/clf/7.0.4/img/apple-touch-icon-57-precomposed.png">
</head>
<body class="full-width">
    <!-- UBC Global Utility Menu -->
    <div class="collapse expand" id="ubc7-global-menu">
      <div id="ubc7-search" class="expand">
	<div class="container">
	  <div id="ubc7-search-box">
	    <form class="form-search" method="get" action="//www.ubc.ca/search/refine/" role="search">
	      <input type="text" name="q" placeholder="Search this website" class="input-xlarge search-query">
	      <input type="hidden" name="label" value="Search UBC" />
	      <input type="hidden" name="site" value="*.ubc.ca" />
	      <button type="submit" class="btn">Search</button>
	    </form>
	  </div>
	</div>
      </div>
      <div class="container">
	<div id="ubc7-global-header" class="expand">
	  <!-- Global Utility Header from CDN -->
	</div>
      </div>
    </div>
    <!-- End of UBC Global Utility Menu -->
    <!-- UBC Header -->
    <header id="ubc7-header" class="row-fluid expand" role="banner">
      <div class="container">
	<div class="span1">
	  <div id="ubc7-logo">
	      <a href="http://www.ubc.ca">The University of British Columbia</a>
	  </div>
	</div>
	<div class="span2">
	  <div id="ubc7-apom">
	      <a href="//cdn.ubc.ca/clf/ref/aplaceofmind">UBC - A Place of Mind</a>
	  </div>
	</div>
	<div class="span9" id="ubc7-wordmark-block">
	  <div id="ubc7-wordmark">
	      <a href="http://www.ubc.ca">The University of British Columbia</a>
	      <!-- span class="ubc7-campus" id="ubc7-vancouver-campus">Vancouver campus</span-->
	  </div>
	  <div id="ubc7-global-utility">
	      <button type="button" data-toggle="collapse" data-target="#ubc7-global-menu"><span>UBC Search</span></button>
	      <noscript><a id="ubc7-global-utility-no-script" href="http://www.ubc.ca/">UBC Search</a></noscript>
	  </div>
	</div>
      </div>
    </header>
    <!-- End of UBC Header -->
    <!-- UBC Unit Identifier -->
    <div id="ubc7-unit" class="row-fluid expand">
      <div class="container">
	<div class="span12">
	  <!-- Mobile Menu Icon -->
	  <div class="navbar">
	    <a class="btn btn-navbar" data-toggle="collapse" data-target="#ubc7-unit-navigation">
	      <span class="icon-bar"></span>
	      <span class="icon-bar"></span>
	      <span class="icon-bar"></span>
	    </a>
	  </div>
	  <!-- Read more about Unit Name Treatment on http://brand.ubc.ca/clf -->
	  <!-- No Faculty Treatment -->
	  <div id="ubc7-unit-name" class="ubc7-single-element">
	    <span id="ubc7-unit-identifier"><a href="{{ url('ubc_exam_main_homepage') }}">Exam Prep Database</a></span>
	  </div>
	</div>
      </div>
    </div>
    <!-- End of UBC Unit Identifier -->
    <!-- UBC Unit Navigation -->
    <div id="ubc7-unit-menu" class="navbar expand" role="navigation">
      <div class="navbar-inner expand">
	<div class="container">
	  <div class="nav-collapse collapse" id="ubc7-unit-navigation">
		  {{ render_esi(url('exam_nav', {'currentRoute': app.request.attributes.get('_route')})) }}
	  </div><!-- /nav-collapse -->
	</div><!-- /container -->
      </div><!-- /navbar-inner -->
    </div><!-- /navbar -->
    <!-- End of UBC Unit Navigation -->
    <div class="full-width-container">
      <!-- UBC Unit Breadcrumbs -->
      <!--ul class="breadcrumb expand">
	<li>
	  <a href="#">Faculty Name</a> <span class="divider">/</span>
	</li>
	<li>
	  <a href="#">Unit Name</a> <span class="divider">/</span>
	</li>
	<li class="active">
	  Page Name
	</li>
      </ul-->
      <!-- End of UBC Unit Breadcrumbs -->
      <!-- Content Area -->
      <div class="content expand" role="main">
		  {% for flashMessage in app.session.flashbag.get('notice') %}
			  <br /><div class="flash-notice alert alert-warning">
				  {{ flashMessage }}
			  </div>
		  {% endfor %}
		  {% for flashMessage in app.session.flashbag.get('success') %}
			  <br /><div class="flash-success alert alert-success">
				  {{ flashMessage }}
			  </div>
		  {% endfor %}

		  {% for flashMessage in app.session.flashbag.get('error') %}
			  <br /><div class="flash-error alert alert-error">
				  {{ flashMessage }}
			  </div>
		  {% endfor %}
		  {% block body %}
        {% endblock %}
      </div>
      <!-- End of Content Area -->
    </div>
    <!-- Footer Area Unit Menu - Mobile Only -->
    <div id="ubc7-unit-alternate-navigation" style="display:none !important" class="navbar expand visible-phone" role="navigation">
        <div class="navbar-inner expand">
	<div class="container">
	  <div class="nav-collapse collapse">
		  {{ render_esi(url('exam_nav', {'currentRoute': app.request.attributes.get('_route')})) }}
	  </div><!-- /nav-collapse -->
	</div><!-- /container -->
      </div><!-- /navbar-inner -->
    </div><!-- /navbar -->
    <!-- End of Footer Area Unit Menu -->
    <footer id="ubc7-footer" class="expand" role="contentinfo">
      <div class="row-fluid expand" id="ubc7-unit-footer">
	<div class="container">
	  <div class="span10" id="ubc7-unit-address">
	    <div id="ubc7-address-unit-name">Centre for Teaching, Learning and Technology</div>
	    <div id="ubc7-address-campus">Vancouver Campus</div>
	    <div id="ubc7-address-street">214 - 1961 East Mall</div>
	    <div id="ubc7-address-location">
		<span id="ubc7-address-city">Vancouver</span>, <span id="ubc7-address-province">BC</span> <span id="ubc7-address-country">Canada</span> <span id="ubc7-address-postal">V6T 1Z1</span>
	    </div>
	    <div id="ubc7-address-phone">Tel 604.827.4494</div>
	    <div id="ubc7-address-email">Website <a href="http://ctlt.ubc.ca">ctlt.ubc.ca</a></div>
	  </div>
	  <div class="span2">
	    <!-- <strong>Find us on</strong>
	    <div id="ubc7-unit-social-icons">
	      <a href="http://www.ubc.ca/"><i class="icon-facebook-sign"></i></a>&nbsp;
	      <a href="http://www.ubc.ca/"><i class="icon-twitter-sign"></i></a>
	    </div> -->
	  </div>
	</div>
      </div>
      <div class="row-fluid expand ubc7-back-to-top">
	<div class="container">
	  <div class="span2">
	    <a href="#">Back to top <div class="ubc7-arrow up-arrow grey"></div></a>
	  </div>
	</div>
      </div>
      <div class="row-fluid expand" id="ubc7-global-footer">
	<div class="container">
	  <div class="span5" id="ubc7-signature"><a href="http://www.ubc.ca/">The University of British Columbia</a></div>
	  <div class="span7" id="ubc7-footer-menu"></div>
	</div>
      </div>
      <div class="row-fluid expand" id="ubc7-minimal-footer">
	<div class="container">
	  <div class="span12">
	    <ul>
	      <li><a href="//cdn.ubc.ca/clf/ref/emergency">Emergency Procedures</a> <span class="divider">|</span></li>
	      <li><a href="//cdn.ubc.ca/clf/ref/terms">Terms of Use</a> <span class="divider">|</span></li>
	      <li><a href="//cdn.ubc.ca/clf/ref/copyright">Copyright</a> <span class="divider">|</span></li>
	      <li><a href="//cdn.ubc.ca/clf/ref/accessibility">Accessibility</a></li>
	    </ul>
	  </div>
	</div>
      </div>
    </footer>
    <!-- Placed javascript at the end for faster loading -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
    <script src="//cdn.ubc.ca/clf/7.0.4/js/ubc-clf.min.js"></script>
    {% javascripts 'bundles/ubcexammain/js/*' %}
      <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
    {% if (app.request.attributes.get('_route') == 'ubc_exam_main_homepage' and q) %}
      <script>
	{% for exam in pagination %}
	  var campus = '{{ exam.campus }}';
	  var subjectcode = '{{ exam.subjectcode }}';
	  var subject = subjectcode.split(' ')[0];
	  var url = '{{ path('exam_wiki', {'campus': 'UBC','subject': 'ENGL'}) }}';
	  url = url.replace("UBC", campus); 		// need to overwrite defaults this way
	  var urlToUse = url.replace("ENGL", subject);  // can't pass these in initially
	  var department = '{{ exam.dept }}';
	  $.ajax({
	    type: 'GET',
	    url: urlToUse,
	    async: false,
	    success: function (data) {
	      if (data.length > 0) {
		$("#"+department+"-modal .modal-body").html(data);  // load Wiki HTML
		$("."+department+".yes-wiki").show();       	    // show hidden Wiki link
		$("."+department+".no-wiki").hide();        	    // hide visible no link text
	      }
	      // alert("success");
	    },
	    error: function() {
	      // alert("error");
	    }
	  });
	{% endfor %}
      </script>
    {% endif %}
    {% if app.request.attributes.get('_route') == 'exam_upload' %}
      <script>
	$('.campus-select').change(function() {
	  var thisCampus = $(".campus-select").val();
	  var urlToUse = '{{ path('exam_campus', {'campus': 'UBC'}) }}';
	  urlToUse = urlToUse.replace("UBC", thisCampus);
	  $.ajax({
	    type: 'GET',
	    url: urlToUse,
	    success: function (sentBack) {
	      var json = sentBack.data;
	      $(".campus-select[value=' ']").remove();     // campus dropdown can only toggle once selected, no null
	      json.sort( function( a, b ) {                // sort subject codes alphabetically
		return a.code < b.code ? -1 : a.code > b.code ? 1 : 0;
	      });
	      var optionItems= '<option value="" selected="selected">- Choose subject -</option>';
	      $.each(json, function(i, item) {             // grab all subject codes for the subject dropdown list
		optionItems += '<option value="'+ item.code +'">'+ item.code +'</option>';
	      });
	      $("#form_subject_code").html(optionItems);   // add subject codes to the subject  dropdown list
	      // alert("success");
	    },
	    error: function() {
	      //alert("error");
	    },
	    dataType: 'json'
	  });
	});
	$('#form_subject_code').change(function() {
	  var thisCampus = $(".campus-select").val();
	  var thisSubject = $("#form_subject_code").val();
	  var urlToUse = '{{ path('exam_subjectcode', {'campus': 'UBC', 'subjectCode': 'CHIN'}) }}';
	  urlToUse = urlToUse.replace("UBC", thisCampus);
	  urlToUse = urlToUse.replace("CHIN", thisSubject);
	  $.ajax({
	    type: 'GET',
	    url: urlToUse,
	    success: function (data) {
	      $("#form_faculty").val(data.faculty);  // set faculty value based on subject, if available
	      $("#form_dept").val(data.department);  // set department value based on subject, if available
	      //alert("success");
	    },
	    error: function() {
	      //alert("error");
	    },
	    dataType: 'json'
	  });
	});
      </script>
    {% endif %}

	{% if analytics_tracker %}
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
					m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', '{{ analytics_tracker }}', 'auto');
			ga('send', 'pageview');
		</script>
	{% endif %}
</body>
</html>
